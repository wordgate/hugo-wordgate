<div class="manager-nav">
  <div style="margin-bottom: 2rem;">
    <h4 style="margin: 0 0 1rem 0; color: #6c757d; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em;">
      {{ .Site.Title }} ç®¡ç†åå°
    </h4>
  </div>

  <nav>
    <ul>
      <!-- ä»ªè¡¨æ¿ -->
      <li>
        <a href="/manager/" {{ if eq .RelPermalink "/manager/" }}class="active"{{ end }}>
          ğŸ“Š ä»ªè¡¨æ¿
        </a>
      </li>

      <!-- äº§å“ç®¡ç† -->
      <li>
        <a href="/manager/products/" {{ if hasPrefix .RelPermalink "/manager/products" }}class="active"{{ end }}>
          ğŸ“¦ äº§å“ç®¡ç†
        </a>
      </li>

      <!-- è®¢å•ç®¡ç† -->
      <li>
        <a href="/manager/orders/" {{ if hasPrefix .RelPermalink "/manager/orders" }}class="active"{{ end }}>
          ğŸ“ è®¢å•ç®¡ç†
        </a>
      </li>

      <!-- ç”¨æˆ·ç®¡ç† -->
      <li>
        <a href="/manager/users/" {{ if hasPrefix .RelPermalink "/manager/users" }}class="active"{{ end }}>
          ğŸ‘¥ ç”¨æˆ·ç®¡ç†
        </a>
      </li>

      <!-- ä¼šå‘˜ç®¡ç† -->
      <li>
        <a href="/manager/membership/" {{ if hasPrefix .RelPermalink "/manager/membership" }}class="active"{{ end }}>
          ğŸ’ ä¼šå‘˜ç®¡ç†
        </a>
      </li>

      <!-- ç³»ç»Ÿè®¾ç½® -->
      <li style="margin-top: 1.5rem;">
        <div style="color: #6c757d; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">
          ç³»ç»Ÿè®¾ç½®
        </div>
      </li>
      <li>
        <a href="/manager/config/" {{ if hasPrefix .RelPermalink "/manager/config" }}class="active"{{ end }}>
          âš™ï¸ åº”ç”¨é…ç½®
        </a>
      </li>
      <li>
        <a href="/manager/profile/" {{ if hasPrefix .RelPermalink "/manager/profile" }}class="active"{{ end }}>
          ğŸ¢ åº”ç”¨ä¿¡æ¯
        </a>
      </li>
    </ul>
  </nav>

  <!-- ç”¨æˆ·ä¿¡æ¯ -->
  <div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #dee2e6;">
    <div id="manager-user-info" style="font-size: 0.875rem; color: #6c757d;">
      <div>å½“å‰ç”¨æˆ·: <span id="current-user-name">-</span></div>
      <div>è§’è‰²: <span id="current-user-role">-</span></div>
    </div>
    <div style="margin-top: 0.5rem;">
      <a href="javascript:void(0)" onclick="managerLogout()" style="font-size: 0.75rem; color: #dc3545;">
        é€€å‡ºç™»å½•
      </a>
    </div>
  </div>
</div>

<script>
  // æ˜¾ç¤ºå½“å‰ç”¨æˆ·ä¿¡æ¯
  document.addEventListener('DOMContentLoaded', function() {
    if (window.$wg && window.$wg.auth.isLoggedIn()) {
      const profile = window.$wg.user.getProfile();
      if (profile.nickname) {
        document.getElementById('current-user-name').textContent = profile.nickname;
      }
      if (profile.role) {
        const roleNames = {
          'owner': 'æ‰€æœ‰è€…',
          'admin': 'ç®¡ç†å‘˜',
          'user': 'ç”¨æˆ·'
        };
        document.getElementById('current-user-role').textContent = roleNames[profile.role] || profile.role;
      }
    }
  });

  // é€€å‡ºç™»å½•
  function managerLogout() {
    if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
      window.$wg.auth.logout();
      window.location.href = '/wordgate/login';
    }
  }
</script>